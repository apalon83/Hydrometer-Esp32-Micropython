(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d22c0ff"],{f241:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",{attrs:{view:"lHh Lpr lFf"}},[i("q-header",{attrs:{elevated:""}},[i("q-toolbar",{staticClass:"bg-deep-orange"},[i("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Settings"},on:{click:e.handleSettingsBtn}},[i("q-icon",{attrs:{name:"build"}})],1),i("q-toolbar-title",[e._v("\n        无线电子比重计 - 校准模式\n      ")])],1)],1),i("q-drawer",{attrs:{bordered:"","content-class":"bg-grey-2"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[i("q-list",[i("q-item-label",{attrs:{header:""}},[e._v("设置选项")]),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"account_circle"}})],1),i("q-item-section",[i("q-item-label",[e._v("无线SSID")]),i("q-item-label",[i("q-input",{attrs:{outlined:"",dense:""},model:{value:e.settings.apSsid,callback:function(t){e.$set(e.settings,"apSsid",t)},expression:"settings.apSsid"}})],1)],1)],1),i("q-separator",{attrs:{spaced:""}}),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"wifi"}})],1),i("q-item-section",[i("q-item-label",[e._v("WiFi热点")]),i("q-item-label",[i("q-select",{attrs:{outlined:"",options:e.settings.wifiList,dense:"","options-dense":""},model:{value:e.settings.wifi.ssid,callback:function(t){e.$set(e.settings.wifi,"ssid",t)},expression:"settings.wifi.ssid"}})],1),i("q-item-label",[i("q-input",{attrs:{outlined:"",type:e.isPwd?"password":"text",dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.settings.wifi.pass,callback:function(t){e.$set(e.settings.wifi,"pass",t)},expression:"settings.wifi.pass"}})],1),i("q-item-label",{staticClass:"flex justify-end"},[i("q-btn",{attrs:{round:"",color:"deep-orange",icon:"refresh"},on:{click:e.handleWifiRefreshBtn}},[i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle"}},[e._v("\n                刷新WiFi列表\n              ")])],1),i("div",[e._v("    ")]),i("q-btn",{attrs:{disable:!this.settings.wifi.ssid,round:"",color:"deep-orange",icon:"rss_feed"},on:{click:e.handleWifiConnectBtn}},[i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle"}},[e._v("\n                连接WiFi热点\n              ")])],1)],1)],1)],1),i("q-separator",{attrs:{spaced:""}}),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"settings_remote"}})],1),i("q-item-section",[i("q-item-label",[e._v("发酵箱AP热点")]),i("q-item-label",[i("q-select",{attrs:{outlined:"",options:e.settings.wifiList,dense:"","options-dense":""},model:{value:e.settings.fermenterAp.ssid,callback:function(t){e.$set(e.settings.fermenterAp,"ssid",t)},expression:"settings.fermenterAp.ssid"}})],1),i("q-item-label",[i("q-input",{attrs:{outlined:"",type:e.isPwd?"password":"text",dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.settings.fermenterAp.pass,callback:function(t){e.$set(e.settings.fermenterAp,"pass",t)},expression:"settings.fermenterAp.pass"}})],1),i("q-item-label",{staticClass:"flex justify-end"},[i("q-btn",{attrs:{round:"",color:"deep-orange",icon:"refresh"},on:{click:e.handleWifiRefreshBtn}},[i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle"}},[e._v("\n                刷新AP列表\n              ")])],1),i("div",[e._v("    ")]),i("q-btn",{attrs:{disable:!this.settings.fermenterAp.ssid,round:"",color:"deep-orange",icon:"speaker_phone"},on:{click:e.handleFermenterConnectBtn}},[i("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle"}},[e._v("\n                连接发酵箱AP\n              ")])],1)],1)],1)],1),i("q-separator",{attrs:{spaced:""}}),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"restore"}})],1),i("q-item-section",[i("q-item-label",[e._v("唤醒采样频率")]),i("q-item-label",[i("q-input",{staticClass:"text-h5",attrs:{outlined:"",type:"number","input-class":"text-right",dense:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._v("\n                每\n              ")]},proxy:!0},{key:"append",fn:function(){return[e._v("\n                分钟\n              ")]},proxy:!0}]),model:{value:e.settings.deepSleepIntervalMinute,callback:function(t){e.$set(e.settings,"deepSleepIntervalMinute",e._n(t))},expression:"settings.deepSleepIntervalMinute"}})],1)],1)],1),i("q-separator",{attrs:{spaced:""}}),i("q-item",[i("q-item-section",[i("q-btn",{attrs:{glossy:"",unelevated:"",color:"deep-orange",icon:"save",label:"保存设置",size:"lg"},on:{click:e.handleSaveSettingsBtn}},[i("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle"}},[e._v("\n              保存设置选项\n            ")])],1)],1)],1),i("q-item",[i("q-item-section",[i("q-btn",{attrs:{disable:e.rebootBtnIsDisabled,glossy:"",unelevated:"",color:"deep-orange",icon:"autorenew",label:"重启设备",size:"lg"},on:{click:e.handleRebootBtn}},[i("q-tooltip",[e._v("\n              重启设备使设置生效\n            ")])],1)],1)],1)],1)],1),i("q-page-container",{staticClass:"bg-grey-2"},[i("router-view")],1)],1)},s=[],o=(i("c5f6"),i("0967"),i("2b0e"),{name:"MyLayout",data:function(){return{leftDrawerOpen:!1,isPwd:!0,rebootBtnIsDisabled:!0,settings:{apSsid:"Hydrometer",wifi:{ssid:"",pass:""},fermenterAp:{ssid:"",pass:""},deepSleepIntervalMinute:20,deepSleepIntervalMs:12e5,wifiList:["28#301","28#301_ASUS","Fermenter","ChinaNet1234","ChinaNet4542","UnionCom8876"]}}},methods:{handleSettingsBtn:function(){var e=this;this.leftDrawerOpen||this.$axios.get("/settings").then(function(t){e.settings=t.data}).catch(function(t){console.log(t),e.$q.notify({color:"negative",icon:"error_outline",message:"Error: 无法从后台获取设置选项数据!"})}),this.leftDrawerOpen=!this.leftDrawerOpen},handleWifiRefreshBtn:function(){var e=this;this.$axios.get("/wifi").then(function(t){e.settings.wifiList=t.data.wifiList}).catch(function(t){console.log(t),e.$q.notify({color:"negative",icon:"signal_wifi_off",message:"Error: 无法刷新WiFi热点列表!"})})},handleWifiConnectBtn:function(){var e=this;this.$axios.post("/wifi",this.settings.wifi).then(function(t){e.$q.notify({color:"info",icon:"signal_wifi_4_bar_lock",message:"已成功连接WiFi热点“".concat(e.settings.wifi.ssid,"”!")})}).catch(function(t){console.log(t),e.$q.notify({color:"negative",icon:"signal_wifi_off",message:"Error: 无法连接WiFi热点“".concat(e.settings.wifi.ssid,"”!")})})},handleFermenterConnectBtn:function(){var e=this;this.$axios.post("/wifi",this.settings.fermenterAp).then(function(t){e.$q.notify({color:"info",icon:"signal_wifi_4_bar_lock",message:"已成功连接发酵箱AP信号“".concat(e.settings.fermenterAp.ssid,"”!")})}).catch(function(t){console.log(t),e.$q.notify({color:"negative",icon:"signal_wifi_off",message:"Error: 无法连接发酵箱AP信号“".concat(e.settings.fermenterAp.ssid,"”!")})})},handleSaveSettingsBtn:function(){var e=this;this.$axios.post("/settings",{apSsid:this.settings.apSsid,wifi:this.settings.wifi,fermenterAp:this.settings.fermenterAp,deepSleepIntervalMinute:Number(this.settings.deepSleepIntervalMinute)}).then(function(t){e.$q.notify({color:"info",icon:"check_circle_outline",message:"已成功保存设置选项! 请重启设备!"}),e.rebootBtnIsDisabled=!1}).catch(function(t){console.log(t),e.$q.notify({color:"negative",icon:"error_outline",message:"Error: 保存设置选项失败!"})})},handleRebootBtn:function(){this.confirmReboot()},confirmReboot:function(){var e=this;this.$q.dialog({title:"确认重启设备",message:"是否确认要重启设备的主控板？",ok:{push:!0},cancel:{push:!0,color:"negative"},persistent:!0}).onOk(function(){e.$axios("/reboot").then(function(t){e.$q.notify({color:"info",icon:"autorenew",message:"正在重启设备，请稍候..."})}).catch(function(t){console.log(t),e.$q.notify({color:"negative",icon:"error_outline",message:"Error: 无法与主控板通讯，未能重启设备!"})})}).onCancel(function(){})}}}),a=o,r=i("2877"),l=Object(r["a"])(a,n,s,!1,null,null,null);t["default"]=l.exports}}]);